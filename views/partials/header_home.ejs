<!-- partials/header.ejs -->
<header class="navbar navbar-expand-lg bg-white shadow-sm py-3">
  <div class="container d-flex justify-content-between align-items-center">
    <!-- Brand -->
    <div class="d-flex align-items-center navbar-brand">
      <img src="/images/logo.svg" width="50" class="me-2">
      <div>
        <h3 class="m-0 fw-bold">WhatIfWorld</h3>
        <small class="text-muted">Explore What-If Scenarios with AI</small>
      </div>
    </div>

    <!-- Mobile toggle -->
    <button class="navbar-toggler hamburger" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <i class="bi bi-list fs-2"></i>
    </button>

    <!-- Menu items -->
    <div class="collapse navbar-collapse justify-content-end" id="navMenu">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item mx-2"><a href="/about" class="nav-link fw-semibold">About Us</a></li>
        <!-- <li class="nav-item mx-2"><a href="/theme" class="nav-link fw-semibold">Theme</a></li> -->
         <!-- Theme Toggle -->
          <li class="theme-toggle ms-3">
            <button id="themeToggle" class="btn btn-outline-secondary rounded-circle me-5">
              <i id="themeIcon" class="bi bi-moon"></i>
            </button>
          </li>


        <% if (!currentUser) { %>
          <!-- Show login/signup inside collapse on mobile -->
          <li class="nav-item d-lg-none my-2">
            <a href="/login" class="btn btn-outline-primary w-100 fw-semibold">Login</a>
          </li>
          <li class="nav-item d-lg-none">
            <a href="/signup" class="btn btn-primary w-100 fw-semibold">Sign Up</a>
          </li>
        <% } %>
      </ul>
    </div>

    <% if (currentUser) { %>
      <!-- Profile Icon -->
      <div class="profile-icon ms-3">
        <img src="<%= currentUser.photo %>" class="rounded-circle shadow-sm" id="profileToggle" width="40" height="40" alt="Profile">
      </div>
    <% } else { %>
      <!-- Login/Signup for desktop -->
      <div class="d-none d-lg-flex align-items-center">
        <a href="/login" class="btn btn-outline-primary me-2 fw-semibold px-3">Login</a>
        <a href="/signup" class="btn btn-primary fw-semibold px-3">Sign Up</a>
      </div>
    <% } %>
  </div>
</header>

<!-- Profile Sidebar -->
<% if (currentUser) { %>
  <div id="profileSidebar" class="profile-sidebar">
     <div class="d-flex justify-content-end p-2">
      <i class="bi bi-x-lg fs-4" id="closeSidebar" style="cursor: pointer;"></i>
    </div>
    <div class="profile-header d-flex align-items-center p-3">
      <img src="<%= currentUser.photo %>" width="50" height="50" class="rounded-circle me-2">
      <div>
        <h6 class="mb-0 fw-semibold"><%= currentUser.username %></h6>
        <small class="text-secondary">@<%= currentUser.username.toLowerCase() %></small>
      </div>
    </div>
    <hr>
    <ul class="list-unstyled ps-3">
      <li><a href="/profile/<%= currentUser.id %>"><i class="bi bi-person me-2"></i> My Profile</a></li>
      <li><a href="/edit-profile"><i class="bi bi-pencil-square me-2"></i> Edit Profile</a></li>
      <li><a href="/my-posts"><i class="bi bi-journal-text me-2"></i> My Predictions</a></li>
      <li><a href="/settings"><i class="bi bi-gear me-2"></i> Settings</a></li>
      <li><a href="/logout" class="text-danger"><i class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
    </ul>
  </div>
<% } %>

<!-- Overlay -->
<div id="overlay"></div>
