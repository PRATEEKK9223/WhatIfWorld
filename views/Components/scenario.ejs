<%- layout('layouts/boilerplate')%>
<body>
  <div class="container py-5">
    <h1 class="text-center mb-2">Explore What-If Scenarios</h1>
    <p class="text-center text-muted mb-4">
      Enter a scenario and explore AI-powered predictions about the future.
    </p>

    <!-- Scenario Form -->
    <form action="/scenario" method="POST" class="text-center mb-5">
      <div class="mb-4">
        <textarea id="scenario" name="scenario" rows="3" class="form-control mx-auto" style="max-width:600px;" placeholder="e.g. What if petrol is banned in India by 2026?" required></textarea>
      </div>

      <div class="d-flex flex-wrap justify-content-center mb-3" id="categoryButtons">
        <button type="button" class="category-btn active" data-value="all">All</button>
        <button type="button" class="category-btn" data-value="health">Health</button>
        <button type="button" class="category-btn" data-value="education">Education</button>
        <button type="button" class="category-btn" data-value="environment">Environment</button>
        <button type="button" class="category-btn" data-value="technology">Technology</button>
        <button type="button" class="category-btn" data-value="economy">Economy</button>
        <button type="button" class="category-btn" data-value="society">Society</button>
        <button type="button" class="category-btn" data-value="politics">Politics</button>
      </div>

      <input type="hidden" name="domain" id="selectedDomain" value="all">

      <button type="submit" class="btn btn-primary px-4 py-2">Predict Outcome</button>
    </form>

    <!-- Featured Trending Scenario -->
    <div class="trending-card mb-4">
      <h5 class="fw-bold mb-1 fs-3">Most Trending Scenario</h5>
      <h6 class="mb-1 ">What if <%=MostTrending.result.textual_analysis.scenario%>?</h6>
      <p class="text-muted mb-2"><%=MostTrending.result.textual_analysis.key_implications[0]%></p>
      <p><strong>Domain:-</strong><%=MostTrending.result.textual_analysis.domain%></p>
      <p><strong>Probability:-</strong><span class="probability-box"><%=MostTrending.result.textual_analysis.probability%>%</span></p>
      <div class="d-flex justify-content-between align-items-center">
        <img src=<%=MostTrending.result.chartImages.barChart%> alt="Bar-graph" class="img-fluid chart-image">
      </div>
    </div>

    <!-- Trending Scenarios Grid -->
    <h5 class="fw-bold mb-3 fs-3">Trending Scenarios</h5>
    <div class="row">
      <% Trending.forEach((post)=>{%>
         <div class="col-md-6 col-lg-4">
          <div class="trending-card">
            <h6>What if <%=post.result.textual_analysis.scenario%>?</h6>
            <p class="text-muted mb-2"><%=post.result.textual_analysis.key_implications[0]%></p>
            <p><strong>Domain:-</strong><%=post.result.textual_analysis.domain%></p>
            <p><strong>Probability:-</strong><span class="probability-box"> <%=post.result.textual_analysis.probability%>%</span></p>
            <div class="d-flex justify-content-between align-items-center">
              <a href="/community/<%=post._id%>" class="btn btn-outline-primary btn-sm">View Details</a>
            </div>
          </div>
        </div>   
      <%})%>
    </div>
  </div>
<%- include('../partials/footer') %>
</body>
